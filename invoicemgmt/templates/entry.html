{% load static %}
{% load crispy_forms_tags %}
{% include 'navbar.html' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" 
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link href="{% static 'css/stylesheet.css' %}" rel="stylesheet">

    <link href="{% static 'js/jquery-ui-1.14.0/jquery-ui.min.css' %}" rel="stylesheet">
    <link href="{% static 'js/jquery-ui-1.14.0/jquery-ui.structure.min.css' %}" rel="stylesheet">
    <link href="{% static 'js/jquery-ui-1.14.0/jquery-ui.theme.min.css' %}" rel="stylesheet">

    <script src="{% static 'js/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'js/jquery-ui-1.14.0/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/myjs.js' %}"></script>
    
    <title>{{ title }}</title>
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>
                    {{ message }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
</head>
<body>
<div class="main-container">  
<div class="container mt-5">
    <div class="row">
        <!-- Form Section -->
        <div class="col-md-9">
          <div class="myForm">
            <h2>{{ title }}</h2>
            {% if form.errors %}
                <div class="alert alert-danger">
                    <strong>Please correct the following errors:</strong>
                    <ul>
                        {% for field in form %}
                            {% for error in field.errors %}
                                <li>{{ field.label }}: {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                        {% for error in form.non_field_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            <form method="POST" action="">{% csrf_token %}
                <div class="row mb-3">
                    <div class="col-md-6">
                        {{ form.invoice_date|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.invoice_number|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        {{ form.name|as_crispy_field }}
                    </div>
                    <div class="col-md-6">
                        {{ form.phone_number|as_crispy_field }}
                    </div>
                </div>

                <!-- Explicitly listing the line items -->
                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_one|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_one_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_one_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_one_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_two|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_two_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_two_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_two_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_three|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_three_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_three_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_three_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_four|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_four_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_four_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_four_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_five|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_five_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_five_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_five_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_six|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_six_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_six_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_six_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_seven|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_seven_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_seven_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_seven_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_eight|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_eight_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_eight_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_eight_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_nine|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_nine_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_nine_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_nine_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3 align-items-center">
                    <div class="col-md-6">
                        {{ form.line_ten|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_ten_quantity|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_ten_unit_price|as_crispy_field }}
                    </div>
                    <div class="col-md-2">
                        {{ form.line_ten_total_price|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-12">
                        {{ form.invoice_type|as_crispy_field }}
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-12">
                        {{ form.total|as_crispy_field }}
                    </div>
                </div>

                <button id="more-line" type="button" class="btn btn-primary">Show / Hide More Lines</button>
                <button type="submit" class="btn btn-danger">Save</button>
            </form>
          </div>
        </div>


        <!-- Recent Invoices Section -->
        <div class="col-md-3">
            <div>
                <span class="text-muted">Recent Invoices</span>
                <span class="badge badge-secondary badge-pill">{{ total_invoices }}</span>
            </div>
            {% for instance in queryset %}
            <ul class="list-group mb-3">
                <li class="list-group-item d-flex justify-content-between lh-condensed">
                    <div>
                        <h6 class="my-0">{{ instance.name }}</h6>
                        <small class="text-muted">{{ instance.invoice_date }}</small>
                    </div>   
                    <div class="text-muted">${{instance.total}}</div>
                </li>
            </ul>
            {% endfor %}
        </div>
    </div>
</div>
</div>  

</body>
</html>
